import streamlit as st
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go
from datetime import datetime

# Configuraci√≥n de la p√°gina
st.set_page_config(
    page_title="Cronolog√≠a de Distribuciones Linux",
    page_icon="üêß",
    layout="wide",
    initial_sidebar_state="expanded"
)

# CSS personalizado para el tema Linux
st.markdown("""
<style>
    .main {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
        color: #ffffff;
    }
    
    .stApp {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    }
    
    .title-container {
        background: linear-gradient(90deg, #2196F3 0%, #21CBF3 100%);
        padding: 2rem;
        border-radius: 15px;
        margin: 1rem 0;
        text-align: center;
        box-shadow: 0 8px 32px rgba(33, 150, 243, 0.3);
    }
    
    .distro-card {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        padding: 1.5rem;
        margin: 1rem 0;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        transition: transform 0.3s ease;
    }
    
    .distro-card:hover {
        transform: translateY(-5px);
    }
    
    .timeline-item {
        background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
        padding: 1rem;
        border-radius: 10px;
        margin: 0.5rem 0;
        color: white;
        font-weight: bold;
    }
    
    .feature-box {
        background: rgba(76, 175, 80, 0.2);
        border-left: 4px solid #4CAF50;
        padding: 1rem;
        border-radius: 5px;
        margin: 0.5rem 0;
    }
    
    .difference-box {
        background: rgba(255, 152, 0, 0.2);
        border-left: 4px solid #FF9800;
        padding: 1rem;
        border-radius: 5px;
        margin: 0.5rem 0;
    }
    
    h1, h2, h3 {
        color: #21CBF3 !important;
    }
    
    .stSelectbox > div > div {
        background-color: rgba(255, 255, 255, 0.1);
        color: white;
    }
</style>
""", unsafe_allow_html=True)

# T√≠tulo principal
st.markdown("""
<div class="title-container">
    <h1>üêß Cronolog√≠a del Desarrollo de las Distribuciones Linux</h1>
    <p style="font-size: 1.2em; margin-top: 1rem;">Un viaje a trav√©s de la evoluci√≥n del ecosistema Linux</p>
</div>
""", unsafe_allow_html=True)

# Sidebar con navegaci√≥n
st.sidebar.markdown("## üìã Navegaci√≥n")
seccion = st.sidebar.selectbox(
    "Selecciona una secci√≥n:",
    ["üè† Inicio", "üìÖ Cronolog√≠a", "üîç Comparaci√≥n de Distros", "üìä Estad√≠sticas", "üå≥ √Årbol Geneal√≥gico"]
)

# Datos de las distribuciones
distros_data = {
    "Slackware": {"a√±o": 1993, "fundador": "Patrick Volkerding", "descripci√≥n": "Una de las primeras distribuciones Linux, conocida por su estabilidad y simplicidad.", "familia": "Independiente"},
    "Debian": {"a√±o": 1993, "fundador": "Ian Murdock", "descripci√≥n": "Base de muchas otras distribuciones, famosa por su estabilidad y sistema de paquetes APT.", "familia": "Debian"},
    "Red Hat": {"a√±o": 1994, "fundador": "Marc Ewing", "descripci√≥n": "Distribuci√≥n comercial que dio origen a muchas otras distros empresariales.", "familia": "Red Hat"},
    "SUSE": {"a√±o": 1994, "fundador": "Roland Dyroff", "descripci√≥n": "Distribuci√≥n alemana enfocada en el mercado empresarial.", "familia": "SUSE"},
    "Ubuntu": {"a√±o": 2004, "fundador": "Mark Shuttleworth", "descripci√≥n": "Basada en Debian, populariz√≥ Linux en el escritorio con su facilidad de uso.", "familia": "Debian"},
    "CentOS": {"a√±o": 2004, "fundador": "Gregory Kurtzer", "descripci√≥n": "Versi√≥n gratuita de Red Hat Enterprise Linux.", "familia": "Red Hat"},
    "Fedora": {"a√±o": 2003, "fundador": "Red Hat Inc.", "descripci√≥n": "Versi√≥n comunitaria de Red Hat con tecnolog√≠as de vanguardia.", "familia": "Red Hat"},
    "openSUSE": {"a√±o": 2005, "fundador": "Novell", "descripci√≥n": "Versi√≥n comunitaria de SUSE Linux.", "familia": "SUSE"},
    "Arch Linux": {"a√±o": 2002, "fundador": "Judd Vinet", "descripci√≥n": "Distribuci√≥n rolling release enfocada en simplicidad y personalizaci√≥n.", "familia": "Independiente"},
    "Gentoo": {"a√±o": 2002, "fundador": "Daniel Robbins", "descripci√≥n": "Distribuci√≥n source-based que compila todo desde el c√≥digo fuente.", "familia": "Independiente"},
    "Mint": {"a√±o": 2006, "fundador": "Clement Lefebvre", "descripci√≥n": "Basada en Ubuntu, enfocada en facilidad de uso y multimedia.", "familia": "Debian"},
    "Elementary OS": {"a√±o": 2011, "fundador": "Daniel For√©", "descripci√≥n": "Distribuci√≥n elegante basada en Ubuntu con interfaz similar a macOS.", "familia": "Debian"},
    "Manjaro": {"a√±o": 2011, "fundador": "Roland Singer", "descripci√≥n": "Basada en Arch Linux pero m√°s f√°cil de usar.", "familia": "Arch"},
    "Kali Linux": {"a√±o": 2013, "fundador": "Mati Aharoni", "descripci√≥n": "Distribuci√≥n especializada en seguridad y hacking √©tico.", "familia": "Debian"},
    "Pop!_OS": {"a√±o": 2017, "fundador": "System76", "descripci√≥n": "Basada en Ubuntu, optimizada para gaming y desarrollo.", "familia": "Debian"}
}

if seccion == "üè† Inicio":
    col1, col2 = st.columns([2, 1])
    
    with col1:
        st.markdown("""
        <div class="distro-card">
        <h2>¬øQu√© es una Distribuci√≥n Linux? ü§î</h2>
        <p>Una distribuci√≥n Linux (o "distro") es un sistema operativo basado en el kernel Linux que incluye:</p>
        
        <div class="feature-box">
        ‚Ä¢ <strong>Kernel Linux:</strong> El n√∫cleo del sistema operativo<br>
        ‚Ä¢ <strong>Software del sistema:</strong> Herramientas b√°sicas y utilidades<br>
        ‚Ä¢ <strong>Gestor de paquetes:</strong> Sistema para instalar/actualizar software<br>
        ‚Ä¢ <strong>Entorno de escritorio:</strong> Interfaz gr√°fica de usuario<br>
        ‚Ä¢ <strong>Aplicaciones:</strong> Programas preinstalados
        </div>
        </div>
        """, unsafe_allow_html=True)
        
    with col2:
        st.markdown("""
        <div class="distro-card">
        <h3>üìà Estad√≠sticas R√°pidas</h3>
        """, unsafe_allow_html=True)
        
        st.metric("Distribuciones activas", "600+", "üî•")
        st.metric("A√±os desde la primera", "31", "üìÖ")
        st.metric("Familias principales", "6", "üå≥")
        
        st.markdown("</div>", unsafe_allow_html=True)

elif seccion == "üìÖ Cronolog√≠a":
    st.markdown("## üìÖ L√≠nea Temporal del Desarrollo de Linux")
    
    # Crear timeline interactivo
    df_timeline = pd.DataFrame([
        {"Distro": distro, "A√±o": info["a√±o"], "Fundador": info["fundador"], "Familia": info["familia"]} 
        for distro, info in distros_data.items()
    ])
    
    fig = px.scatter(df_timeline, x="A√±o", y="Distro", color="Familia", size_max=20,
                     hover_data=["Fundador"], title="Evoluci√≥n de las Distribuciones Linux")
    
    fig.update_layout(
        plot_bgcolor='rgba(0,0,0,0)',
        paper_bgcolor='rgba(0,0,0,0)',
        font_color='white',
        height=600
    )
    
    st.plotly_chart(fig, use_container_width=True)
    
    # Eventos importantes por d√©cada
    st.markdown("### üéØ Eventos Importantes por D√©cada")
    
    decadas = {
        "1990s": [
            "1991: Linus Torvalds lanza el kernel Linux",
            "1993: Nacen Slackware y Debian",
            "1994: Red Hat y SUSE inician operaciones",
            "1998: Se acu√±a el t√©rmino 'Open Source'"
        ],
        "2000s": [
            "2002: Gentoo y Arch Linux aparecen",
            "2003: Fedora se independiza de Red Hat",
            "2004: Ubuntu revoluciona Linux desktop",
            "2006: Linux Mint ofrece multimedia out-of-box"
        ],
        "2010s": [
            "2011: Elementary OS y Manjaro democratizan el dise√±o",
            "2013: Kali Linux unifica herramientas de seguridad",
            "2017: Pop!_OS optimiza para gaming",
            "2019: Microsoft lanza WSL2 con kernel Linux real"
        ]
    }
    
    for decada, eventos in decadas.items():
        st.markdown(f"#### {decada}")
        for evento in eventos:
            st.markdown(f'<div class="timeline-item">{evento}</div>', unsafe_allow_html=True)

elif seccion == "üîç Comparaci√≥n de Distros":
    st.markdown("## üîç Comparaci√≥n Detallada de Distribuciones")
    
    # Selector de distribuciones para comparar
    distros_seleccionadas = st.multiselect(
        "Selecciona las distribuciones a comparar:",
        list(distros_data.keys()),
        default=["Ubuntu", "Fedora", "Arch Linux"]
    )
    
    if distros_seleccionadas:
        # Tabla comparativa
        comparacion_data = []
        for distro in distros_seleccionadas:
            info = distros_data[distro]
            comparacion_data.append({
                "Distribuci√≥n": distro,
                "A√±o": info["a√±o"],
                "Fundador": info["fundador"],
                "Familia": info["familia"],
                "Descripci√≥n": info["descripci√≥n"]
            })
        
        df_comparacion = pd.DataFrame(comparacion_data)
        st.dataframe(df_comparacion, use_container_width=True)
        
        # Caracter√≠sticas t√©cnicas detalladas
        st.markdown("### ‚öôÔ∏è Caracter√≠sticas T√©cnicas")
        
        caracteristicas = {
            "Ubuntu": {
                "Gestor de paquetes": "APT (Advanced Package Tool)",
                "Ciclo de lanzamiento": "6 meses (LTS cada 2 a√±os)",
                "Entorno predeterminado": "GNOME",
                "Filosof√≠a": "Linux para seres humanos",
                "Uso recomendado": "Escritorio, servidores, principiantes"
            },
            "Fedora": {
                "Gestor de paquetes": "DNF (Dandified YUM)",
                "Ciclo de lanzamiento": "6 meses",
                "Entorno predeterminado": "GNOME",
                "Filosof√≠a": "Innovaci√≥n y tecnolog√≠as de vanguardia",
                "Uso recomendado": "Desarrolladores, usuarios avanzados"
            },
            "Arch Linux": {
                "Gestor de paquetes": "Pacman",
                "Ciclo de lanzamiento": "Rolling release",
                "Entorno predeterminado": "Ninguno (instalaci√≥n m√≠nima)",
                "Filosof√≠a": "Simplicidad y control total del usuario",
                "Uso recomendado": "Usuarios expertos, personalizaci√≥n extrema"
            },
            "Debian": {
                "Gestor de paquetes": "APT",
                "Ciclo de lanzamiento": "2-3 a√±os",
                "Entorno predeterminado": "GNOME",
                "Filosof√≠a": "Software libre universal",
                "Uso recomendado": "Servidores, estabilidad cr√≠tica"
            },
            "Mint": {
                "Gestor de paquetes": "APT",
                "Ciclo de lanzamiento": "Basado en Ubuntu LTS",
                "Entorno predeterminado": "Cinnamon",
                "Filosof√≠a": "Elegante, moderno, c√≥modo",
                "Uso recomendado": "Transici√≥n desde Windows"
            }
        }
        
        for distro in distros_seleccionadas:
            if distro in caracteristicas:
                st.markdown(f"#### {distro}")
                caract = caracteristicas[distro]
                
                col1, col2 = st.columns(2)
                with col1:
                    st.markdown(f'<div class="difference-box"><strong>Gestor de paquetes:</strong> {caract["Gestor de paquetes"]}</div>', unsafe_allow_html=True)
                    st.markdown(f'<div class="difference-box"><strong>Ciclo de lanzamiento:</strong> {caract["Ciclo de lanzamiento"]}</div>', unsafe_allow_html=True)
                
                with col2:
                    st.markdown(f'<div class="difference-box"><strong>Entorno predeterminado:</strong> {caract["Entorno predeterminado"]}</div>', unsafe_allow_html=True)
                    st.markdown(f'<div class="difference-box"><strong>Filosof√≠a:</strong> {caract["Filosof√≠a"]}</div>', unsafe_allow_html=True)
                
                st.markdown(f'<div class="feature-box"><strong>Uso recomendado:</strong> {caract["Uso recomendado"]}</div>', unsafe_allow_html=True)

elif seccion == "üìä Estad√≠sticas":
    st.markdown("## üìä Estad√≠sticas y An√°lisis")
    
    col1, col2 = st.columns(2)
    
    with col1:
        # Gr√°fico de distribuci√≥n por familia
        familias_count = {}
        for distro, info in distros_data.items():
            familia = info["familia"]
            familias_count[familia] = familias_count.get(familia, 0) + 1
        
        fig_familias = px.pie(
            values=list(familias_count.values()),
            names=list(familias_count.keys()),
            title="Distribuci√≥n por Familias"
        )
        fig_familias.update_layout(
            plot_bgcolor='rgba(0,0,0,0)',
            paper_bgcolor='rgba(0,0,0,0)',
            font_color='white'
        )
        st.plotly_chart(fig_familias, use_container_width=True)
    
    with col2:
        # Gr√°fico de distribuciones por d√©cada
        decadas_count = {"1990s": 0, "2000s": 0, "2010s": 0}
        for distro, info in distros_data.items():
            a√±o = info["a√±o"]
            if a√±o < 2000:
                decadas_count["1990s"] += 1
            elif a√±o < 2010:
                decadas_count["2000s"] += 1
            else:
                decadas_count["2010s"] += 1
        
        fig_decadas = px.bar(
            x=list(decadas_count.keys()),
            y=list(decadas_count.values()),
            title="Nuevas Distribuciones por D√©cada",
            color=list(decadas_count.values()),
            color_continuous_scale="Viridis"
        )
        fig_decadas.update_layout(
            plot_bgcolor='rgba(0,0,0,0)',
            paper_bgcolor='rgba(0,0,0,0)',
            font_color='white',
            showlegend=False
        )
        st.plotly_chart(fig_decadas, use_container_width=True)
    
    # Popularidad estimada
    st.markdown("### üèÜ Popularidad Estimada (DistroWatch Rankings)")
    
    popularidad_data = {
        "Ubuntu": 2500,
        "Mint": 2200,
        "Debian": 1800,
        "Fedora": 1500,
        "openSUSE": 1200,
        "Arch Linux": 1100,
        "Manjaro": 1000,
        "Elementary OS": 800,
        "Pop!_OS": 600,
        "Kali Linux": 500
    }
    
    fig_popularidad = px.bar(
        x=list(popularidad_data.keys()),
        y=list(popularidad_data.values()),
        title="Hits por D√≠a en DistroWatch (Estimado)",
        color=list(popularidad_data.values()),
        color_continuous_scale="Blues"
    )
    fig_popularidad.update_layout(
        plot_bgcolor='rgba(0,0,0,0)',
        paper_bgcolor='rgba(0,0,0,0)',
        font_color='white',
        showlegend=False,
        xaxis_tickangle=-45
    )
    st.plotly_chart(fig_popularidad, use_container_width=True)

elif seccion == "üå≥ √Årbol Geneal√≥gico":
    st.markdown("## üå≥ √Årbol Geneal√≥gico de las Distribuciones")
    
    st.markdown("""
    <div class="distro-card">
    <h3>Familia Debian (APT)</h3>
    <p>üì¶ Gestor de paquetes: APT/DPKG</p>
    <div style="margin-left: 20px;">
        üå± <strong>Debian (1993)</strong><br>
        ‚îú‚îÄ‚îÄ üçÉ <strong>Ubuntu (2004)</strong><br>
        ‚îÇ   ‚îú‚îÄ‚îÄ üåø Linux Mint (2006)<br>
        ‚îÇ   ‚îú‚îÄ‚îÄ üé® Elementary OS (2011)<br>
        ‚îÇ   ‚îî‚îÄ‚îÄ üöÄ Pop!_OS (2017)<br>
        ‚îî‚îÄ‚îÄ üîí Kali Linux (2013)
    </div>
    </div>
    """, unsafe_allow_html=True)
    
    st.markdown("""
    <div class="distro-card">
    <h3>Familia Red Hat (RPM)</h3>
    <p>üì¶ Gestor de paquetes: YUM/DNF</p>
    <div style="margin-left: 20px;">
        üé© <strong>Red Hat (1994)</strong><br>
        ‚îú‚îÄ‚îÄ üî¥ Red Hat Enterprise Linux (RHEL)<br>
        ‚îÇ   ‚îî‚îÄ‚îÄ üè¢ CentOS (2004)<br>
        ‚îî‚îÄ‚îÄ üéì Fedora (2003)
    </div>
    </div>
    """, unsafe_allow_html=True)
    
    st.markdown("""
    <div class="distro-card">
    <h3>Familia SUSE (RPM)</h3>
    <p>üì¶ Gestor de paquetes: Zypper/RPM</p>
    <div style="margin-left: 20px;">
        ü¶é <strong>SUSE (1994)</strong><br>
        ‚îú‚îÄ‚îÄ üíº SUSE Linux Enterprise<br>
        ‚îî‚îÄ‚îÄ üåê openSUSE (2005)
    </div>
    </div>
    """, unsafe_allow_html=True)
    
    st.markdown("""
    <div class="distro-card">
    <h3>Familia Arch (Pacman)</h3>
    <p>üì¶ Gestor de paquetes: Pacman</p>
    <div style="margin-left: 20px;">
        üèõÔ∏è <strong>Arch Linux (2002)</strong><br>
        ‚îî‚îÄ‚îÄ üåä Manjaro (2011)
    </div>
    </div>
    """, unsafe_allow_html=True)
    
    st.markdown("""
    <div class="distro-card">
    <h3>Distribuciones Independientes</h3>
    <div style="margin-left: 20px;">
        üõ°Ô∏è <strong>Slackware (1993)</strong> - Portage<br>
        ‚öóÔ∏è <strong>Gentoo (2002)</strong> - Emerge/Portage<br>
        üêß <strong>Linux From Scratch (LFS)</strong> - Manual
    </div>
    </div>
    """, unsafe_allow_html=True)

# Footer
st.markdown("""
<div style="margin-top: 3rem; padding: 2rem; background: rgba(0,0,0,0.3); border-radius: 15px; text-align: center;">
    <h4>üêß ¬°Explora el mundo de Linux!</h4>
    <p>Cada distribuci√≥n tiene su prop√≥sito y comunidad. La diversidad es la fortaleza del ecosistema Linux.</p>
    <p><em>"Linux is not just an operating system, it's a philosophy of freedom and collaboration."</em></p>
</div>
""", unsafe_allow_html=True)
